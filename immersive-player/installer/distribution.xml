<?xml version="1.0" encoding="UTF-8"?>
<installer-gui-script minSpecVersion="2">
    <title>Immersive Player</title>
    <organization>com.immersiveplayer</organization>
    <domains enable_localSystem="true"/>
    
    <!-- Minimum system requirements -->
    <os-version min="10.15"/>
    
    <!-- Welcome, readme, license, and conclusion -->
    <welcome file="welcome.html" mime-type="text/html"/>
    <readme file="readme.html" mime-type="text/html"/>
    <conclusion file="conclusion.html" mime-type="text/html"/>
    
    <!-- Installation choices -->
    <choices-outline>
        <line choice="default">
            <line choice="com.immersiveplayer.app"/>
        </line>
    </choices-outline>
    
    <!-- Default choice -->
    <choice id="default"/>
    
    <!-- Main application package -->
    <choice 
        id="com.immersiveplayer.app" 
        visible="true" 
        title="Immersive Player"
        description="GPU-accelerated HAP video player with projection blending capabilities."
        start_selected="true"
        start_enabled="true"
        start_visible="true">
        <pkg-ref id="com.immersiveplayer.app"/>
    </choice>
    
    <!-- Package reference -->
    <pkg-ref 
        id="com.immersiveplayer.app"
        version="0.1.0"
        onConclusion="none">
        ImmersivePlayer.pkg
    </pkg-ref>
    
    <!-- Installation check script -->
    <installation-check script="installationCheck()"/>
    <script>
    function installationCheck() {
        if (system.compareVersions(system.version.ProductVersion, '10.15') &lt; 0) {
            my.result.title = 'macOS 10.15 or later required';
            my.result.message = 'Immersive Player requires macOS 10.15 (Catalina) or later. Please upgrade your operating system.';
            my.result.type = 'Fatal';
            return false;
        }
        return true;
    }
    </script>
</installer-gui-script>


